<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

  <head>

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>

    <title>거기가니?</title>

    <!-- Bootstrap core CSS -->
    <link th:href="@{/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet"/>

    <!-- Custom fonts for this template -->
    <link th:href="@{/vendor/font-awesome/css/font-awesome.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{https://fonts.googleapis.com/css?family=Montserrat:400,700}" rel="stylesheet" type="text/css"/>
    <link th:href='@{https://fonts.googleapis.com/css?family=Kaushan+Script}' rel='stylesheet' type='text/css'/>
    <link th:href='@{https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic}' rel='stylesheet' type='text/css'/>
    <link th:href='@{https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700}' rel='stylesheet' type='text/css'/>

    <link rel="stylesheet" th:href="@{https://fonts.googleapis.com/earlyaccess/cwtexhei.css}" type="text/css">
    <link rel="stylesheet" th:href="@{https://fonts.googleapis.com/earlyaccess/notosanskr.css}" type="text/css">

    <!-- Custom styles for this template -->
    <link th:href="@{/css/agency.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/loading.css}" rel="stylesheet"/>
    <link th:href="@{/css/loading-btn.css}" rel="stylesheet"/>

    <style>
      .post-footer{ position: relative; bottom: 0; left: 0; right: 0; text-align: center; }
      .post-footer > li{ display: inline-block; line-height:5px; border-right: 1px solid #fff; background: #FFFFFF; }
      .post-footer > li:first-child{ float: left; }
      .post-footer > li:last-child{ border: 0px; float: right; }
      .post-footer i{ display: inline-block; margin-right: 1px; opacity: .6; font-size: 1.1em; }

      table { table-layout: fixed; }
      table th, table td {
        overflow: hidden;
        text-overflow: ellipsis;
      }

      tr td{
        padding: 1 !important;
        margin: 0 !important;
      }

      a:link
      {color: #dd3806;}
      a:visited
      {color: blue;}
      a:hover
      {color: #dd3806;}

      BODY {
         font-family:  'cwTeXHei', 'Noto Sans KR', serif;
      }

      img:not([src]) {
			visibility: hidden;
		}

		/* Fixes Firefox anomaly during image load */
		@-moz-document url-prefix() {
			img:-moz-loading {
				visibility: hidden;
			}
		}

      #bottomNav {
          background-color: #212529;
          opacity: 0.70;
      }

    </style>
  </head>

  <body id="page-top" onload="document.getElementById('menu-sd').click();">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
      <div class="container">
        <div class="logo">
          <a th:href="@{/popular-destinations}" th:onclick="'javascript:show_logo_progress()'"><img th:src="${'/img/logos/geogigani_icon_48x48.png'}" title="geogigani"></a>
        </div>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav text-uppercase ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#portfolio2" style="font-family: 'Noto Sans KR', serif;"><i class="fa fa-history fa-fw"></i>조회된여행지</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" th:onclick="'javascript:show_logo_progress()'" th:href="'javascript:getLocation()'" style="font-family: 'Noto Sans KR', serif;"><i class="fa fa-bullseye fa-fw"></i>내근처여행지</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" th:onclick="'javascript:show_logo_progress()'" th:href="@{/dust-info}" style="font-family: 'cwTeXHei', 'Noto Sans KR', serif;"><i class="fa fa-cloud fa-fw"></i>미세먼지</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" th:onclick="'javascript:show_logo_progress()'" th:href="@{/statistics}" style="font-family: 'Noto Sans KR', serif;"><i class="fa fa-bar-chart-o fa-fw"></i>통계</a>
            </li>

          </ul>
        </div>
      </div>
    </nav>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-bottom" id="bottomNav">
      <div class="container">
        <div class="logo">

        </div>

        <form id="search_form" role="form" th:action="@{/search-destinations}" method="get">
          <div class="form-group" style="margin-bottom: 0rem;">
            <div class="input-group">
              <input id="keywords" name="keywords" style="border-color: #333;opacity: .85;width:170px;font-size:13px;font-family: 'Noto Sans KR', serif;" type="text" class="form-control" placeholder="" th:onkeypress="'javascript:if(event.keyCode==13) {search(); return false;}'"/>
              <div class="input-group-append">
                <button type="button" class="btn btn-block btn-sm" style="border-color: #333;background-color: #dd3806;opacity: .85;"th:onclick="'javascript:search();'">
                  <i class="fa fa-search"></i>
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </nav>

    <!-- Header -->
    <header class="masthead">
      <div class="container">
        <div class="intro-text">
          <div class="intro-lead-in" style="font-family: 'cwTeXHei', 'Noto Sans KR', serif;">똑똑한 여행 도우미</div>
          <div class="intro-heading text-uppercase" style="font-family: 'cwTeXHei', 'Noto Sans KR', serif;">거기가니?</div>
          <form id="search_form_header" role="form" th:action="@{/search-destinations}" method="get">
            <div class="form-group">
              <div class="input-group" s>
                <input id="keywords-header" name="keywords" style="border-color: #555555;opacity: .75;font-family: 'Noto Sans KR', serif;" type="text" class="form-control" placeholder="" th:onkeypress="'javascript:if(event.keyCode==13) {search_header(); return false;}'"/>
                <div class="input-group-append">
                  <button type="button" class="btn btn-block" style="fon-size: 18px;border-color: #555555;background-color: #aaaaaa;opacity: .65;" th:onclick="'javascript:search_header();'">
                    <i class="fa fa-search fa-2x"></i>
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </header>

    <div id="ld-div" class="ld-over-full">
      <div style="font-size:72px;color:#000;" class="ld ld-ring ld-spin"></div>
    </div>

    <!-- Clicked recently Distance -->
    <section id="portfolio2" style="padding: 20px 0;">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
              <h6 class="section-heading text-uppercase">
                  <span class="fa-stack fa-2x">
                    <i class="fa fa-stop fa-stack-2x text-info"></i>
                    <i class="fa fa-history fa-stack-1x fa-inverse"></i>
                  </span>
              </h6>
            <h3 class="section-subheading" style="margin-bottom: 30px;font-family: 'cwTeXHei', 'Noto Sans KR', serif;">조회된 여행지</h3>
          </div>
        </div>

        <div class="row">
          <th:block th:each="doc,iterStat : ${destination_info}" th:if="${destination_info != null}">
            <div class="col-md-4 col-sm-6 portfolio2-item">

              <div class="portfolio2-caption" style="padding-top:10px;">
                <div style="display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;line-height:18px;">
                  <a th:onclick="'javascript:show_detail(' + ${doc.contentid} + ')'" style="cursor:pointer;display:flex;font-size:14px;line-height:12px;">
                    <i class="fa fa-tasks" style="width:20px;"> </i>
                    <text th:text="${doc.titleshort}" style="display:block;margin-top:.1rem;margin-bottom:.1rem;font-weight:bold;font-family: 'cwTeXHei', 'Noto Sans KR', serif;"></text>
                  </a>
                  <!--<small style="display:block;font-family: 'Noto Sans KR', serif;">공유하기</small>-->
                  <a th:href="'javascript:sendLink(\'' + ${doc.title} + '\',\'' + ${(doc.firstimage2 != null) ? doc.firstimage2 : #httpServletRequest.getContextPath() + '/img/no_image_available.png'} + '\',\'' + ${#httpServletRequest.getContextPath() + '/destination-detail/' + {doc.contentid}} + '\')'" style="display:block;">
                    <img src="//developers.kakao.com/assets/img/about/logos/kakaolink/kakaolink_btn_small.png" style="width:20px; height:20px;border: 1px solid #111111;"/>
                  </a>
                </div>

                <hr style="margin-top:0.3rem;margin-bottom:0.7rem;"/>

                <a class="portfolio2-link" th:onclick="'javascript:show_detail(' + ${doc.contentid} + ')'">
                  <div class="portfolio2-hover">
                    <div class="portfolio2-hover-content">
                      <i class="fa fa-plus fa-3x"></i>
                    </div>
                  </div>

                  <img class="img-fluid lazy" style="border: 1px solid #aaaaaa;padding:1px;" th:attr="data-src=${(doc.firstimage2 != null) ? doc.firstimage2 : '/img/no_image_available.png'}" th:alt="${doc.title}"/>

                </a>

                <!--<h6 th:text="${doc.titleshort}" style="font-family: 'cwTeXHei', 'Noto Sans KR', serif;"></h6>-->
                <div class="text-left">
                  <small class="text-muted" th:utext="${doc.overviewshort}"></small>
                </div>
                <hr style="margin-top:0.3rem;"/>
                <ul class="post-footer" style="margin: 0; padding: 0;">
                  <li class="fa fa-eye" th:text="' ' +${doc.clickcount}"></li>
                </ul>
              </div>
            </div>
          </th:block>
        </div>


        <!--<tenping class="adsbytenping" style="width: 100%; margin: 0px auto; display: block; max-width: 768px;" tenping-ad-client="ULkZYhHDonqxNgJx%2bd2t5XgWCcx0QUdnsdGDbY1yMIshP4q34efQL0ddArqjWnF3" tenping-ad-display-type="1LawCE8FqKOhetXZhMopsQ%3d%3d"></tenping><script async src='//ads.tenping.kr/scripts/adsbytenping.min.js' ></script>-->

      </div>
    </section>

    <hr/>
    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-12 mx-auto text-center">
            <p class="large text-muted">본 정보는 한국관광공사에서 제공하는 공공데이터를 활용하였으며, 현지사정에 의해 변경될 수 있습니다.</p>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mx-auto text-center">
            <span class="copyright" style="font-family: 'cwTeXHei', 'Noto Sans KR', serif;">Copyright &copy; 2018 GeoGiGaNi All Rights Reserved.</span>
          </div>
        </div>
      </div>
    </footer>


    <!-- kakao -->
    <script th:src="@{https://developers.kakao.com/sdk/js/kakao.min.js}"></script>

    <!-- Bootstrap core JavaScript -->
    <script th:src="@{/vendor/jquery/jquery.min.js}"></script>
    <script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>

    <!-- Plugin JavaScript -->
    <script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>

    <!-- Contact form JavaScript -->
    <script th:src="@{/js/jqBootstrapValidation.js}"></script>
    <script th:src="@{/js/contact_me.js}"></script>

    <!-- Custom scripts for this template -->
    <script th:src="@{/js/agency.min.js}"></script>

    <!-- image lazy loading -->
    <script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/8.14.0/lazyload.min.js}"></script>

    <script>
        new LazyLoad();
    </script>

    <script th:inline="javascript">
      function sendLink(title, img, url) {
          var img_url = img.startsWith("http") ? '' : 'https://www.geogigani.com';
          img_url = img_url + img;

          sendLinkIn(title, img_url, 'https://www.geogigani.com' + url);
      }

      //<![CDATA[
        // // 사용할 앱의 JavaScript 키를 설정해 주세요.
        Kakao.init('883a7ac41344384b003e3b226f1ee346');
        // // 카카오링크 버튼을 생성합니다. 처음 한번만 호출하면 됩니다.
        function sendLinkIn(title, img, url) {
          Kakao.Link.sendDefault({
            objectType: 'feed',
            content: {
              title: title,
              imageUrl: img,
              link: {
                mobileWebUrl: url,
                webUrl: url
              }
            },
            buttons: [
              {
                title: '웹으로 보기',
                link: {
                  mobileWebUrl: url,
                  webUrl: url
                }
              }
            ]
          });
        }
      //]]>

    </script>

    <script th:inline="javascript">
      function search() {
        var text = $("#keywords").val();
        text = text.trim();
        if(text == '') return;

        show_logo_progress();

        $("#search_form").submit();
      }

      function search_header() {
        var text = $("#keywords-header").val();
        text = text.trim();
        if(text == '') return;

        show_logo_progress();

        $("#search_form_header").submit();
      }

      function show_detail(dest_id) {
        var url = /*[[@{'/destination-detail/'}]]*/;
        url = url + dest_id;

        show_logo_progress();

        var form = document.createElement("form");
        form.setAttribute("method", "GET");
        form.setAttribute("action", url);
        document.body.appendChild(form);
        form.submit();
      }

      function show_dust() {
        var url = /*[[@{'/dust-info'}]]*/;

        show_logo_progress();

        var form = document.createElement("form");
        form.setAttribute("method", "GET");
        form.setAttribute("action", url);
        document.body.appendChild(form);
        form.submit();
      }

      function getLocation() {
          if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(showPosition, handleError, {
                enableHighAccuracy: false,
                maximumAge: 0,
                timeout: 20000
              });
          } else {
              alert('GPS를 지원하지 않습니다.');
          }
      }

      function showPosition(position) {
          var url = /*[[@{'/short-dist-destinations-from-me/'}]]*/;
          url = url + position.coords.latitude + '/' + position.coords.longitude;

          show_logo_progress();

          var form = document.createElement("form");
          form.setAttribute("method", "GET");
          form.setAttribute("action", url);
          document.body.appendChild(form);
          form.submit();
      }

      function handleError(error) {
        hide_logo_progress();

        alert("GPS 및 위치 서비스가 활성화되어 있어야 합니다.");
      }

      function show_logo_progress() {
        document.getElementById("ld-div").classList.add('running');
      }

      function hide_logo_progress() {
        document.getElementById("ld-div").classList.remove('running');
      }
    </script>

  </body>

</html>
